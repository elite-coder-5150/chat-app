const chatForm=document.getElementById("chat-form"),chatMessages=document.querySelector(".chat-messages"),roomName=document.getElementById("room-name"),userList=document.getElementById("users"),Qs=require("qs"),{username:username,room:room}=Qs.parse(location.search,{ignoreQueryPrefix:!0}),socket=io();function outputMessage(e){const s=document.createElement("div");s.classList.add("message"),s.innerHTML=` ${e.username} ${e.time} ${e.text} `,document.querySelector(".chat-messages").appendChild(s)}function outputRoomName(e){roomName.innerText=e}function outputUsers(e){userList.innerHTML=`\n        ${e.map((e=>` ${e.username} `)).join("")}\n    `}socket.emit("joinRoom",{username:username,room:room}),socket.on("roomUsers",(({room:e,users:s})=>{outputRoomName(e),outputUsers(s)})),socket.on("message",(e=>{console.log(e),outputMessage(e),chatMessages.scrollTop=chatMessages.scrollHeight})),chatForm.addEventListener("submit",(e=>{e.preventDefault();const s=e.target.elements.msg.value;socket.emit("chatMessage",s),e.target.elements.msg.value="",e.target.elements.msg.focus()}));